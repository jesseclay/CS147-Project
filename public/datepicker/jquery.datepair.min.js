!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){return a}function c(a){a.on("change.datepair",null,e)}function d(a){a.off("change.datepair")}function e(b){var e=a(this);d(e);var f=e.data("datepair-settings"),g=a(b.target);""!=g.val()&&(g.hasClass(f.dateClass)?j(e,g):g.hasClass(f.timeClass)&&l(e,g)),c(e)}function f(a){var b=a.data("datepair-settings");return a.find("."+b.startClass+"."+b.dateClass)}function g(a){var b=a.data("datepair-settings");return a.find("."+b.endClass+"."+b.dateClass)}function h(a){var b=a.data("datepair-settings");return a.find("."+b.startClass+"."+b.timeClass)}function i(a){var b=a.data("datepair-settings");return a.find("."+b.endClass+"."+b.timeClass)}function j(a,b){var c=a.data("datepair-settings"),d=f(a),e=g(a);if(!d.val()||!e.val()){if(null!==c.defaultDateDelta){if(d.val()){var h=c.parseDate(d),i=new Date(h.getTime()+c.defaultDateDelta*m);c.updateDate(e,i)}else if(e.val()){var j=c.parseDate(e),l=new Date(j.getTime()+c.defaultDateDelta*m);c.updateDate(d,l)}a.data("datepair-datedelta",c.defaultDateDelta*m)}else a.data("datepair-datedelta",null);return void k(a)}var h=c.parseDate(d),j=c.parseDate(e);if(b.hasClass(c.startClass)){var n=new Date(h.getTime()+a.data("datepair-datedelta"));c.updateDate(e,n)}else b.hasClass(c.endClass)&&(h>j?(a.data("datepair-datedelta",0),c.updateDate(d,j)):a.data("datepair-datedelta",j.getTime()-h.getTime()));k(a)}function k(a){var b=a.data("datepair-settings");if("function"==typeof b.setMinTime){var c;if(a.data("datepair-datedelta")<=m||!a.data("datepair-datedelta"))var d=h(a),c=b.parseTime(d);var e=i(a);b.setMinTime(e,c)}}function l(a,b){var c=a.data("datepair-settings"),d=h(a),e=i(a);if(!d.val()||!e.val()){if(null!==c.defaultTimeDelta){if(d.val()){var f=c.parseTime(d),j=new Date(f.getTime()+c.defaultTimeDelta);c.updateTime(e,j)}else if(e.val()){var l=c.parseTime(e),n=new Date(q.getTime()+c.defaultTimeDelta);c.updateTime(d,n)}a.data("datepair-timedelta",c.defaultTimeDelta)}else a.data("datepair-timedelta",null);return void k(a)}var f=c.parseTime(d),l=c.parseTime(e);if(b.hasClass(c.startClass)){var o=new Date(f.getTime()+a.data("datepair-timedelta"));c.updateTime(e,o),l=c.parseTime(e)}if((l.getTime()-f.getTime())*a.data("datepair-timedelta")<0){var p=g(a),q=c.parseDate(p),r=f>l?m:-1*m;c.updateDate(p,new Date(q.getTime()+r));var s=a.data("datepair-timedelta")+r;a.data("datepair-timedelta",s)}a.data("datepair-timedelta",l.getTime()-f.getTime()),k(a)}var m=864e5,n={startClass:"start",endClass:"end",timeClass:"time",dateClass:"date",defaultDateDelta:0,defaultTimeDelta:36e5,parseTime:function(a){return a.timepicker("getTime")},updateTime:function(a,b){a.timepicker("setTime",b)},parseDate:function(a){return a.datepicker("getDate")},updateDate:function(a,b){a.datepicker("update",b)},setMinTime:function(a,b){a.timepicker("option","minTime",b)}},o={init:function(d){return this.each(function(){var e=a(this),j=a.extend({},n);d&&(j=a.extend(j,d)),j=b(j),e.data("datepair-settings",j),c(e);var l=f(e),m=g(e);if(l.val()&&m.val()){var o=j.parseDate(l),p=j.parseDate(m);e.data("datepair-datedelta",p.getTime()-o.getTime())}var q=h(e),r=i(e);if(q.val()&&r.val()){var s=j.parseTime(q),t=j.parseTime(r);e.data("datepair-timedelta",t.getTime()-s.getTime())}k(e)})},option:function(c,d){var e=this,f=e.data("datepair-settings");if("object"==typeof c)f=a.extend(f,c);else if("string"==typeof c&&"undefined"!=typeof d)f[c]=d;else if("string"==typeof c)return f[c];return f=b(f),e.data("datepair-settings",f),e},remove:function(){var a=this;a.removeData("datepair-settings"),a.off(".timepicker")}};a.fn.datepair=function(b){return o[b]?o[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.datepair"):o.init.apply(this,arguments)}});